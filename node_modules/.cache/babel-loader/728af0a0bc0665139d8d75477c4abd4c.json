{"ast":null,"code":"import _classCallCheck from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{createStore}from\"redux\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{updateCartQuantity,deleteFromCart,fetchBook,emptyCart}from\"../actions/bookActions\";import*as helper from\"./../helper\";import FontAwesome from\"react-fontawesome\";import{parse}from\"@babel/core\";Array.prototype.sum=function(prop,quantity){var total=0;for(var i=0,_len=this.length;i<_len;i++){total+=parseInt(this[i][prop])*parseInt(this[i][quantity]);}return total;};var Shipping=/*#__PURE__*/function(_Component){_inherits(Shipping,_Component);function Shipping(props){var _this;_classCallCheck(this,Shipping);_this=_possibleConstructorReturn(this,_getPrototypeOf(Shipping).call(this,props));_this.transectionInput=function(){if(_this.state.payment==\"bkash\"){return React.createElement(React.Fragment,null,React.createElement(\"div\",{class:\"alert alert-primary\",role:\"alert\"},\"Please bkash your payment to \",React.createElement(\"span\",{style:{color:'red',fontSize:20}},\"01616313957\"),\" and enter your transection id bellow to proceed\"),React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",{for:\"name\"},\"Transection ID\"),React.createElement(\"input\",{type:\"text\",class:\"form-control\",placeholder:\"transection ID\",required:true,onChange:function onChange(e){return _this.setState({transection_id:e.target.value});}})));}};_this.report=function(response){if(response.success===true){alert('Order successfull');_this.props.history.push(\"/\");_this.props.emptyCart();}else{_this.setState({error:'Something wrong'});}};_this.orderBooks=function(){if(_this.props.cart.length>0){if(_this.state.name!=null&&_this.state.phone!=null&&_this.state.address!=null){_this.props.cart.map(function(book,index){var url=helper.prefix+'order';var data={book_id:book.id,name:_this.state.name,payment_method:_this.state.payment!=null?_this.state.payment:\"cash on delivery\",quantity:book.quantity,phone_number:_this.state.phone,shiping_address:_this.state.address,order_type:0,location:_this.state.location?_this.state.location:'Dhaka',total_price:parseInt(helper.getNewPrice(book.old_price,book.discount))*parseInt(book.quantity),user_id:_this.props.user.id?_this.props.user.id:null,transection_id:_this.state.transection_id?_this.state.transection_id:'null'};fetch(url,{method:'POST',// or 'PUT'\nbody:JSON.stringify(data),// data can be `string` or {object}!\nheaders:{'Content-Type':'application/json','Accept':'application/json','Authorization':'Bearer '+_this.props.token}}).then(function(res){return res.json();}).then(function(response){return _this.report(response);}).catch(function(error){return console.error('Error:',error);});});}else{_this.setState({error:'please input all field'});}}else{_this.setState({error:'please add book to cart for shhoping'});}};_this.errors=function(){if(_this.state.error!=null){return React.createElement(\"span\",{style:{color:'red'}},_this.state.error);}};_this.state={payment:null,name:_this.props.user.name?_this.props.user.name:null,phone:_this.props.user.phone_no?_this.props.user.phone_no:null,location:null,address:null,error:null,transection_id:null};window.scrollTo(0,0);return _this;}_createClass(Shipping,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(React.Fragment,null,React.createElement(\"div\",{id:\"shipping-page\"},React.createElement(\"div\",{class:\"container\"},React.createElement(\"div\",{id:\"shipping-content-wrapper\"},React.createElement(\"div\",{class:\"row\"},React.createElement(\"div\",{class:\"col-md-6\"},React.createElement(\"section\",{class:\"checkout-header\"},React.createElement(\"h1\",{style:{fontWeight:\"normal\"}},\"Shipping Address\")),React.createElement(\"section\",{id:\"address-form\"},React.createElement(\"h1\",{style:{fontWeight:\"normal\"}},\"Fill out your information\"),React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",{for:\"name\"},\"Name\"),React.createElement(\"input\",{type:\"text\",class:\"form-control\",id:\"name\",placeholder:\"name\",value:this.state.name,onChange:function onChange(e){return _this2.setState({name:e.target.value});},required:true})),React.createElement(\"div\",{class:\"form-group \"},React.createElement(\"label\",null,\"Phone number\"),React.createElement(\"input\",{type:\"number\",class:\"form-control cart-qInput\",placeholder:\"phone number\",value:this.state.phone,onChange:function onChange(e){return _this2.setState({phone:e.target.value});},required:true})),React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",{for:\"location\"},\"Select location\"),React.createElement(\"select\",{class:\"form-control\",id:\"location\",onChange:function onChange(e){return _this2.setState({location:e.target.value});}},React.createElement(\"option\",{value:\"dhaka\"},\"Dhaka\"),React.createElement(\"option\",{value:\"chittagong\"},\"Chittagong\"),React.createElement(\"option\",{value:\"rajshahi\"},\"Rajshahi\"),React.createElement(\"option\",{value:\"khulna\"},\"Khulna\"),React.createElement(\"option\",{value:\"barisal\"},\"Barisal\"),React.createElement(\"option\",{value:\"rangpur\"},\"Rangpur\"),React.createElement(\"option\",{value:\"sylhet\"},\"Sylhet\"))),React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",{for:\"address\"},\"Address\"),React.createElement(\"textarea\",{class:\"form-control\",id:\"address\",rows:\"3\",required:true,onChange:function onChange(e){return _this2.setState({address:e.target.value});}},this.state.address)),React.createElement(\"div\",{class:\"form-group\"},React.createElement(\"label\",{for:\"location\"},\"Select payment method\"),React.createElement(\"select\",{class:\"form-control\",id:\"location\",onChange:function onChange(e){return _this2.setState({payment:e.target.value});}},React.createElement(\"option\",{value:\"cash on delivery\"},\"Cash on delivery\"),React.createElement(\"option\",{value:\"bkash\"},\"bkash\"))),this.transectionInput(),this.errors(),React.createElement(\"div\",{className:\"d-flex justify-content-end\"},React.createElement(\"button\",{class:\"btn btn-warning\",onClick:function onClick(){return _this2.orderBooks();}},\"Confirm order\")))),React.createElement(\"div\",{class:\"col-md-4\"},React.createElement(\"section\",{id:\"checkout-sidebar\"},React.createElement(\"div\",{class:\"checkout-sidebar__header\"},React.createElement(\"h1\",{style:{fontWeight:\"normal\"}},\"Checkout Summary\")),React.createElement(\"div\",{class:\"checkout-sidebar__content\"},React.createElement(\"div\",{class:\"d-none\"},React.createElement(\"div\",{class:\"input-group mb-3\"},React.createElement(\"input\",{type:\"text\",name:\"searchdata\",class:\"form-control\",placeholder:\"Email or Phone or Order Id\",id:\"searchdata\"}),React.createElement(\"div\",{class:\"input-group-append\"},React.createElement(\"button\",{class:\"btn btn-secondary\",name:\"searchinfo\",id:\"searchinfo\",type:\"button\"},\"Search\"))),React.createElement(\"button\",{id:\"clearall\",name:\"clearall\",class:\"btn btn-outline-secondary\",type:\"button\"},React.createElement(\"i\",{class:\"ion-close-round mr-2\"}),\" Clear\")),React.createElement(\"div\",{class:\"payment-breakdown\"},React.createElement(\"h2\",{style:{fontWeight:\"normal\"}},\"Payment Details\"),React.createElement(\"div\",{class:\"payment-breakdown__content\"},React.createElement(\"table\",{class:\"table\"},React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"td\",null,\"Subtotal\"),React.createElement(\"td\",{class:\"text-right\",id:\"subtotal\"},parseFloat(this.props.cart.sum(\"old_price\",\"quantity\")).toFixed(2),\" TK.\")),React.createElement(\"tr\",null,React.createElement(\"td\",{id:\"shippingText\"},\"Shipping\"),React.createElement(\"td\",{class:\"text-right\",id:\"shipping\"},\"00 TK.\")),React.createElement(\"tr\",null,React.createElement(\"td\",null,\"Total\"),React.createElement(\"td\",{class:\"text-right\",id:\"total\"},parseFloat(this.props.cart.sum(\"old_price\",\"quantity\")).toFixed(2),\" TK.\")),React.createElement(\"tr\",null,React.createElement(\"td\",null,\"Payable Total\"),React.createElement(\"td\",{class:\"text-right\",id:\"payable\"},parseFloat(this.props.cart.sum(\"old_price\",\"quantity\")).toFixed(2),\" TK.\"))))))))))))));}}]);return Shipping;}(Component);var mapStateToProps=function mapStateToProps(state){return{cart:state.books.cart,user:state.auth.user,token:state.auth.token};};export default connect(mapStateToProps,{updateCartQuantity:updateCartQuantity,deleteFromCart:deleteFromCart,fetchBook:fetchBook,emptyCart:emptyCart})(Shipping);","map":{"version":3,"sources":["/home/hyper/yousuftarek/bookstore/src/components/shipping.jsx"],"names":["React","Component","createStore","Link","connect","updateCartQuantity","deleteFromCart","fetchBook","emptyCart","helper","FontAwesome","parse","Array","prototype","sum","prop","quantity","total","i","_len","length","parseInt","Shipping","props","transectionInput","state","payment","color","fontSize","e","setState","transection_id","target","value","report","response","success","alert","history","push","error","orderBooks","cart","name","phone","address","map","book","index","url","prefix","data","book_id","id","payment_method","phone_number","shiping_address","order_type","location","total_price","getNewPrice","old_price","discount","user_id","user","fetch","method","body","JSON","stringify","headers","token","then","res","json","catch","console","errors","phone_no","window","scrollTo","fontWeight","parseFloat","toFixed","mapStateToProps","books","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport { createStore } from \"redux\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  updateCartQuantity,\n  deleteFromCart,\n  fetchBook,\n  emptyCart\n} from \"../actions/bookActions\";\nimport * as helper from \"./../helper\";\nimport FontAwesome from \"react-fontawesome\";\nimport { parse } from \"@babel/core\";\n\nArray.prototype.sum = function(prop, quantity) {\n  var total = 0;\n  for (var i = 0, _len = this.length; i < _len; i++) {\n    total += parseInt(this[i][prop]) * parseInt(this[i][quantity]);\n  }\n  return total;\n};\n\nclass Shipping extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      payment: null,\n      name: this.props.user.name ? this.props.user.name : null,\n      phone: this.props.user.phone_no ? this.props.user.phone_no : null,\n      location: null,\n      address: null,\n      error: null,\n      transection_id: null\n    };\n    window.scrollTo(0, 0);\n  }\n\n  transectionInput = () => {\n    if (this.state.payment == \"bkash\") {\n      return (\n        <React.Fragment>\n          <div class=\"alert alert-primary\" role=\"alert\">\n            Please bkash your payment to <span style={{color: 'red', fontSize: 20}}>01616313957</span> and enter your transection id bellow to proceed \n          </div>\n          <div class=\"form-group\">\n            <label for=\"name\">Transection ID</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"transection ID\"\n              required\n              onChange={(e) => this.setState({transection_id: e.target.value})}\n            />\n          </div>\n        </React.Fragment>\n      );\n    }\n  };\n\n  report = (response) =>{\n      if(response.success === true){\n        alert('Order successfull')\n        this.props.history.push(`/`);\n        this.props.emptyCart()\n      }else{\n        this.setState({error: 'Something wrong'})\n      }\n  }\n\n  orderBooks = () =>{\n    if (this.props.cart.length > 0){\n       if(this.state.name != null && this.state.phone != null  && this.state.address != null){\n        this.props.cart.map((book, index) =>{\n            var url = helper.prefix + 'order';\n            var data = {\n                book_id: book.id,\n                name: this.state.name,\n                payment_method: this.state.payment != null ? this.state.payment : \"cash on delivery\",\n                quantity: book.quantity,\n                phone_number: this.state.phone,\n                shiping_address: this.state.address,\n                order_type: 0,\n                location: this.state.location ? this.state.location : 'Dhaka',\n                total_price: parseInt(helper.getNewPrice(book.old_price, book.discount)) * parseInt(book.quantity),\n                user_id: this.props.user.id ? this.props.user.id : null,\n                transection_id: this.state.transection_id ? this.state.transection_id : 'null'\n            };\n\n            fetch(url, {\n            method: 'POST', // or 'PUT'\n            body: JSON.stringify(data), // data can be `string` or {object}!\n            headers:{\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'Authorization' : 'Bearer '+this.props.token,\n            }\n            }).then(res => res.json())\n            .then(response => this.report(response))\n            .catch(error => console.error('Error:', error));\n        })\n       }else{\n           this.setState({error: 'please input all field'})\n       }\n    }else{\n        this.setState({error: 'please add book to cart for shhoping'})\n    }\n  }\n\n  errors = () =>{\n    if(this.state.error != null){\n        return(\n            <span style={{color: 'red'}}>\n                {this.state.error}\n            </span>\n        )\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div id=\"shipping-page\">\n          <div class=\"container\">\n            <div id=\"shipping-content-wrapper\">\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <section class=\"checkout-header\">\n                    <h1 style={{ fontWeight: \"normal\" }}>Shipping Address</h1>\n                  </section>\n\n                  <section id=\"address-form\">\n                    <h1 style={{ fontWeight: \"normal\" }}>\n                      Fill out your information\n                    </h1>\n\n                      <div class=\"form-group\">\n                        <label for=\"name\">Name</label>\n                        <input\n                          type=\"text\"\n                          class=\"form-control\"\n                          id=\"name\"\n                          placeholder=\"name\"\n                          value={this.state.name}\n                          onChange={(e) => this.setState({name: e.target.value})}\n                          required\n                        />\n                      </div>\n\n                      <div class=\"form-group \">\n                        <label>Phone number</label>\n                        <input\n                          type=\"number\"\n                          class=\"form-control cart-qInput\"\n                          placeholder=\"phone number\"\n                          value={this.state.phone}\n                          onChange={(e) => this.setState({phone: e.target.value})}\n                          required\n                        />\n                      </div>\n                      <div class=\"form-group\">\n                        <label for=\"location\">Select location</label>\n                        <select class=\"form-control\" id=\"location\" onChange={(e) => this.setState({location: e.target.value})}>\n                          <option value=\"dhaka\">Dhaka</option>\n                          <option value=\"chittagong\">Chittagong</option>\n                          <option value=\"rajshahi\">Rajshahi</option>\n                          <option value=\"khulna\">Khulna</option>\n                          <option value=\"barisal\">Barisal</option>\n                          <option value=\"rangpur\">Rangpur</option>\n                          <option value=\"sylhet\">Sylhet</option>\n                        </select>\n                      </div>\n                      <div class=\"form-group\">\n                        <label for=\"address\">Address</label>\n                        <textarea\n                          class=\"form-control\"\n                          id=\"address\"\n                          rows=\"3\"\n                          required\n                          onChange={(e) => this.setState({address: e.target.value})}\n                        >{this.state.address}</textarea>\n                      </div>\n                      <div class=\"form-group\">\n                        <label for=\"location\">Select payment method</label>\n                        <select\n                          class=\"form-control\"\n                          id=\"location\"\n                          onChange={e =>\n                            this.setState({ payment: e.target.value })\n                          }\n                        >\n                          <option value=\"cash on delivery\">\n                            Cash on delivery\n                          </option>\n                          <option value=\"bkash\">bkash</option>\n                        </select>\n                      </div>\n                      {this.transectionInput()}\n                      {this.errors()}\n                      <div className=\"d-flex justify-content-end\">\n                        <button  class=\"btn btn-warning\"\n                        onClick={() => this.orderBooks()}\n                        >\n                          Confirm order\n                        </button>\n                      </div>\n                  </section>\n                </div>\n\n                <div class=\"col-md-4\">\n                  <section id=\"checkout-sidebar\">\n                    <div class=\"checkout-sidebar__header\">\n                      <h1 style={{ fontWeight: \"normal\" }}>Checkout Summary</h1>\n                    </div>\n\n                    <div class=\"checkout-sidebar__content\">\n                      <div class=\"d-none\">\n                        <div class=\"input-group mb-3\">\n                          <input\n                            type=\"text\"\n                            name=\"searchdata\"\n                            class=\"form-control\"\n                            placeholder=\"Email or Phone or Order Id\"\n                            id=\"searchdata\"\n                          />\n                          <div class=\"input-group-append\">\n                            <button\n                              class=\"btn btn-secondary\"\n                              name=\"searchinfo\"\n                              id=\"searchinfo\"\n                              type=\"button\"\n                            >\n                              Search\n                            </button>\n                          </div>\n                        </div>\n                        <button\n                          id=\"clearall\"\n                          name=\"clearall\"\n                          class=\"btn btn-outline-secondary\"\n                          type=\"button\"\n                        >\n                          <i class=\"ion-close-round mr-2\"></i> Clear\n                        </button>\n                      </div>\n                      <div class=\"payment-breakdown\">\n                        <h2 style={{ fontWeight: \"normal\" }}>\n                          Payment Details\n                        </h2>\n                        <div class=\"payment-breakdown__content\">\n                          <table class=\"table\">\n                            <tbody>\n                              <tr>\n                                <td>Subtotal</td>\n                                <td class=\"text-right\" id=\"subtotal\">\n                                {parseFloat(this.props.cart.sum(\"old_price\", \"quantity\")).toFixed(2)} TK.\n                                </td>\n                              </tr>\n\n                              <tr>\n                                <td id=\"shippingText\">Shipping</td>\n\n                                <td class=\"text-right\" id=\"shipping\">\n                                  00 TK.\n                                </td>\n                              </tr>\n                              <tr>\n                                <td>Total</td>\n                                <td class=\"text-right\" id=\"total\">\n                                  {parseFloat(this.props.cart.sum(\"old_price\", \"quantity\")).toFixed(2)} TK.\n                                </td>\n                              </tr>\n\n                              <tr>\n                                <td>Payable Total</td>\n                                <td class=\"text-right\" id=\"payable\">\n                                  {parseFloat(this.props.cart.sum(\"old_price\", \"quantity\")).toFixed(2)} TK.\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                      </div>\n                    </div>\n                  </section>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nShipping.propTypes = {\n  updateCartQuantity: PropTypes.func.isRequired,\n  deleteFromCart: PropTypes.func.isRequired,\n  fetchBook: PropTypes.func.isRequired,\n  emptyCart: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  cart: state.books.cart,\n  user: state.auth.user,\n  token: state.auth.token\n});\n\nexport default connect(\n  mapStateToProps,\n  { updateCartQuantity, deleteFromCart, fetchBook, emptyCart}\n)(Shipping);\n"]},"metadata":{},"sourceType":"module"}