{"ast":null,"code":"import _classCallCheck from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/hyper/yousuftarek/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{createStore}from\"redux\";import{Link,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{updateCartQuantity,deleteFromCart,fetchBook,emptyCart}from\"../actions/bookActions\";import*as helper from\"./../helper\";import FontAwesome from\"react-fontawesome\";import{parse}from\"@babel/core\";Array.prototype.sum=function(prop,quantity){var total=0;for(var i=0,_len=this.length;i<_len;i++){total+=parseInt(this[i][prop])*parseInt(this[i][quantity]);}return total;};var Orders=/*#__PURE__*/function(_Component){_inherits(Orders,_Component);function Orders(props){var _this;_classCallCheck(this,Orders);_this=_possibleConstructorReturn(this,_getPrototypeOf(Orders).call(this,props));_this.checkAuth=function(){if(Object.keys(_this.props.token).length<=0){return React.createElement(Redirect,{to:\"/\"});}};_this.handleFetch=function(response){console.log(\"fuuuuuuuuuuuuuck \",response);if(response.success){_this.setState({orders:response.orders});}};_this.fetchOrders=function(){console.log(\"asd a     ssss   \",_this.props.token);var url=helper.prefix+\"orders\";fetch(url,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Bearer \"+_this.props.token}}).then(function(res){return res.json();}).then(function(response){return _this.handleFetch(response);}).catch(function(error){return console.error(\"Error:\",error);});};_this.renderOrders=function(){if(_this.state.orders!=null){return _this.state.orders.map(function(order,index){return React.createElement(\"tr\",null,React.createElement(\"th\",{scope:\"row\"},order.id),React.createElement(\"td\",null,React.createElement(\"div\",null,React.createElement(\"img\",{src:order.cover==null?\"images/books/dummy.png\":order.cover,style:{width:100,height:130}}),React.createElement(\"p\",{style:{fontSize:16}},order.book_name))),React.createElement(\"td\",null,order.quantity),React.createElement(\"td\",null,order.total_price),React.createElement(\"td\",null,React.createElement(\"p\",{style:{fontSize:16},class:order.is_seen_by_admin==0?\"text-danger\":\"text-success\"},order.is_seen_by_admin==0?\"Not seen yet\":\"Seen by admin\")),React.createElement(\"td\",null,React.createElement(\"p\",{style:{fontSize:16},class:order.is_completed==0?\"text-danger\":\"text-success\"},order.is_completed==0?\"Not delivered yet\":\"Delivered\")));});}};_this.state={transection_id:null,orders:null};window.scrollTo(0,0);_this.fetchOrders();return _this;}_createClass(Orders,[{key:\"render\",value:function render(){return React.createElement(React.Fragment,null,this.checkAuth(),React.createElement(\"div\",{class:\"container\"},React.createElement(\"p\",{class:\"m-2 mb-3\",style:{fontSize:30}},\"Orders\"),React.createElement(\"div\",{class:\"card\"},React.createElement(\"div\",{class:\"table-responsive\"},React.createElement(\"table\",{class:\"table\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{scope:\"col\"},\"order id\"),React.createElement(\"th\",{scope:\"col\"},\"Book name\"),React.createElement(\"th\",{scope:\"col\"},\"Quantity\"),React.createElement(\"th\",{scope:\"col\"},\"Total cost\"),React.createElement(\"th\",{scope:\"col\"},\"Is seen by admin\"),React.createElement(\"th\",{scope:\"col\"},\"Delivery status\"))),React.createElement(\"tbody\",null,this.renderOrders()))))));}}]);return Orders;}(Component);var mapStateToProps=function mapStateToProps(state){return{token:state.auth.token,user:state.auth.user};};export default connect(mapStateToProps,null)(Orders);","map":{"version":3,"sources":["/home/hyper/yousuftarek/bookstore/src/components/orders.jsx"],"names":["React","Component","createStore","Link","Redirect","connect","updateCartQuantity","deleteFromCart","fetchBook","emptyCart","helper","FontAwesome","parse","Array","prototype","sum","prop","quantity","total","i","_len","length","parseInt","Orders","props","checkAuth","Object","keys","token","handleFetch","response","console","log","success","setState","orders","fetchOrders","url","prefix","fetch","method","headers","Accept","Authorization","then","res","json","catch","error","renderOrders","state","map","order","index","id","cover","width","height","fontSize","book_name","total_price","is_seen_by_admin","is_completed","transection_id","window","scrollTo","mapStateToProps","auth","user"],"mappings":"swBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,WAAT,KAA4B,OAA5B,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,OACEC,kBADF,CAEEC,cAFF,CAGEC,SAHF,CAIEC,SAJF,KAKO,wBALP,CAMA,MAAO,GAAKC,CAAAA,MAAZ,KAAwB,aAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,CACA,OAASC,KAAT,KAAsB,aAAtB,CAEAC,KAAK,CAACC,SAAN,CAAgBC,GAAhB,CAAsB,SAASC,IAAT,CAAeC,QAAf,CAAyB,CAC7C,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAR,CAAWC,IAAI,CAAG,KAAKC,MAA5B,CAAoCF,CAAC,CAAGC,IAAxC,CAA8CD,CAAC,EAA/C,CAAmD,CACjDD,KAAK,EAAII,QAAQ,CAAC,KAAKH,CAAL,EAAQH,IAAR,CAAD,CAAR,CAA0BM,QAAQ,CAAC,KAAKH,CAAL,EAAQF,QAAR,CAAD,CAA3C,CACD,CACD,MAAOC,CAAAA,KAAP,CACD,CAND,C,GAQMK,CAAAA,M,gEACJ,gBAAYC,KAAZ,CAAmB,wCACjB,wEAAMA,KAAN,GADiB,MAUnBC,SAVmB,CAUP,UAAM,CAChB,GAAIC,MAAM,CAACC,IAAP,CAAY,MAAKH,KAAL,CAAWI,KAAvB,EAA8BP,MAA9B,EAAwC,CAA5C,CAA+C,CAC7C,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CACF,CAdkB,OAgBnBQ,WAhBmB,CAgBL,SAAAC,QAAQ,CAAI,CACxBC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCF,QAAjC,EACA,GAAIA,QAAQ,CAACG,OAAb,CAAsB,CACpB,MAAKC,QAAL,CAAc,CAAEC,MAAM,CAAEL,QAAQ,CAACK,MAAnB,CAAd,EACD,CACF,CArBkB,OAuBnBC,WAvBmB,CAuBL,UAAM,CAClBL,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAgC,MAAKR,KAAL,CAAWI,KAA3C,EACA,GAAIS,CAAAA,GAAG,CAAG3B,MAAM,CAAC4B,MAAP,CAAgB,QAA1B,CAEAC,KAAK,CAACF,GAAD,CAAM,CACTG,MAAM,CAAE,KADC,CAETC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,MAAM,CAAE,kBAFD,CAGPC,aAAa,CAAE,UAAY,MAAKnB,KAAL,CAAWI,KAH/B,CAFA,CAAN,CAAL,CAQGgB,IARH,CAQQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EARX,EASGF,IATH,CASQ,SAAAd,QAAQ,QAAI,OAAKD,WAAL,CAAiBC,QAAjB,CAAJ,EAThB,EAUGiB,KAVH,CAUS,SAAAC,KAAK,QAAIjB,CAAAA,OAAO,CAACiB,KAAR,CAAc,QAAd,CAAwBA,KAAxB,CAAJ,EAVd,EAWD,CAtCkB,OAwCnBC,YAxCmB,CAwCJ,UAAM,CACnB,GAAI,MAAKC,KAAL,CAAWf,MAAX,EAAqB,IAAzB,CAA+B,CAC7B,MAAO,OAAKe,KAAL,CAAWf,MAAX,CAAkBgB,GAAlB,CAAsB,SAACC,KAAD,CAAQC,KAAR,CAAkB,CAC7C,MACE,+BACE,0BAAI,KAAK,CAAC,KAAV,EAAiBD,KAAK,CAACE,EAAvB,CADF,CAEE,8BACE,+BACI,2BACE,GAAG,CAAEF,KAAK,CAACG,KAAN,EAAe,IAAf,CAAsB,wBAAtB,CAAiDH,KAAK,CAACG,KAD9D,CAEE,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAT,CAAcC,MAAM,CAAE,GAAtB,CAFT,EADJ,CAKE,yBAAG,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAZ,CAAV,EAA6BN,KAAK,CAACO,SAAnC,CALF,CADF,CAFF,CAWE,8BAAKP,KAAK,CAACnC,QAAX,CAXF,CAYE,8BAAKmC,KAAK,CAACQ,WAAX,CAZF,CAaE,8BACE,yBACE,KAAK,CAAE,CAAEF,QAAQ,CAAE,EAAZ,CADT,CAEE,KAAK,CACHN,KAAK,CAACS,gBAAN,EAA0B,CAA1B,CAA8B,aAA9B,CAA8C,cAHlD,EAMGT,KAAK,CAACS,gBAAN,EAA0B,CAA1B,CAA8B,cAA9B,CAA+C,eANlD,CADF,CAbF,CAuBE,8BACE,yBACE,KAAK,CAAE,CAAEH,QAAQ,CAAE,EAAZ,CADT,CAEE,KAAK,CAAEN,KAAK,CAACU,YAAN,EAAsB,CAAtB,CAA0B,aAA1B,CAA0C,cAFnD,EAIGV,KAAK,CAACU,YAAN,EAAsB,CAAtB,CAA0B,mBAA1B,CAAgD,WAJnD,CADF,CAvBF,CADF,CAkCD,CAnCM,CAAP,CAoCD,CACF,CA/EkB,CAEjB,MAAKZ,KAAL,CAAa,CACXa,cAAc,CAAE,IADL,CAEX5B,MAAM,CAAE,IAFG,CAAb,CAIA6B,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACA,MAAK7B,WAAL,GAPiB,aAQlB,C,0DAyEQ,CACP,MACE,qBAAC,KAAD,CAAO,QAAP,MACG,KAAKX,SAAL,EADH,CAEE,2BAAK,KAAK,CAAC,WAAX,EACE,yBAAG,KAAK,CAAC,UAAT,CAAoB,KAAK,CAAE,CAAEiC,QAAQ,CAAE,EAAZ,CAA3B,WADF,CAIE,2BAAK,KAAK,CAAC,MAAX,EACE,2BAAK,KAAK,CAAC,kBAAX,EACE,6BAAO,KAAK,CAAC,OAAb,EACE,iCACE,8BACE,0BAAI,KAAK,CAAC,KAAV,aADF,CAEE,0BAAI,KAAK,CAAC,KAAV,cAFF,CAGE,0BAAI,KAAK,CAAC,KAAV,aAHF,CAIE,0BAAI,KAAK,CAAC,KAAV,eAJF,CAKE,0BAAI,KAAK,CAAC,KAAV,qBALF,CAME,0BAAI,KAAK,CAAC,KAAV,oBANF,CADF,CADF,CAWE,iCAAQ,KAAKT,YAAL,EAAR,CAXF,CADF,CADF,CAJF,CAFF,CADF,CA2BD,C,oBA9GkBhD,S,EAmHrB,GAAMiE,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAhB,KAAK,QAAK,CAChCtB,KAAK,CAAEsB,KAAK,CAACiB,IAAN,CAAWvC,KADc,CAEhCwC,IAAI,CAAElB,KAAK,CAACiB,IAAN,CAAWC,IAFe,CAAL,EAA7B,CAKA,cAAe/D,CAAAA,OAAO,CACpB6D,eADoB,CAEpB,IAFoB,CAAP,CAGb3C,MAHa,CAAf","sourcesContent":["import React, { Component } from \"react\";\n\nimport { createStore } from \"redux\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  updateCartQuantity,\n  deleteFromCart,\n  fetchBook,\n  emptyCart\n} from \"../actions/bookActions\";\nimport * as helper from \"./../helper\";\nimport FontAwesome from \"react-fontawesome\";\nimport { parse } from \"@babel/core\";\n\nArray.prototype.sum = function(prop, quantity) {\n  var total = 0;\n  for (var i = 0, _len = this.length; i < _len; i++) {\n    total += parseInt(this[i][prop]) * parseInt(this[i][quantity]);\n  }\n  return total;\n};\n\nclass Orders extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transection_id: null,\n      orders: null\n    };\n    window.scrollTo(0, 0);\n    this.fetchOrders()\n  }\n\n  checkAuth = () => {\n    if (Object.keys(this.props.token).length <= 0) {\n      return <Redirect to=\"/\" />;\n    }\n  };\n\n  handleFetch = response => {\n    console.log(\"fuuuuuuuuuuuuuck \", response);\n    if (response.success) {\n      this.setState({ orders: response.orders });\n    }\n  };\n\n  fetchOrders = () => {\n    console.log(\"asd a     ssss   \",this.props.token)\n    var url = helper.prefix + \"orders\";\n\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + this.props.token\n      }\n    })\n      .then(res => res.json())\n      .then(response => this.handleFetch(response))\n      .catch(error => console.error(\"Error:\", error));\n  };\n\n  renderOrders = () => {\n    if (this.state.orders != null) {\n      return this.state.orders.map((order, index) => {\n        return (\n          <tr>\n            <th scope=\"row\">{order.id}</th>\n            <td>\n              <div>\n                  <img\n                    src={order.cover == null ? \"images/books/dummy.png\" : order.cover}\n                    style={{ width: 100, height: 130 }}\n                  />\n                <p style={{ fontSize: 16 }}>{order.book_name}</p>\n              </div>\n            </td>\n            <td>{order.quantity}</td>\n            <td>{order.total_price}</td>\n            <td>\n              <p\n                style={{ fontSize: 16 }}\n                class={\n                  order.is_seen_by_admin == 0 ? \"text-danger\" : \"text-success\"\n                }\n              >\n                {order.is_seen_by_admin == 0 ? \"Not seen yet\" : \"Seen by admin\"}\n              </p>\n            </td>\n            <td>\n              <p\n                style={{ fontSize: 16 }}\n                class={order.is_completed == 0 ? \"text-danger\" : \"text-success\"}\n              >\n                {order.is_completed == 0 ? \"Not delivered yet\" : \"Delivered\"}\n              </p>\n            </td>\n          </tr>\n        );\n      });\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.checkAuth()}\n        <div class=\"container\">\n          <p class=\"m-2 mb-3\" style={{ fontSize: 30 }}>\n            Orders\n          </p>\n          <div class=\"card\">\n            <div class=\"table-responsive\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\">order id</th>\n                    <th scope=\"col\">Book name</th>\n                    <th scope=\"col\">Quantity</th>\n                    <th scope=\"col\">Total cost</th>\n                    <th scope=\"col\">Is seen by admin</th>\n                    <th scope=\"col\">Delivery status</th>\n                  </tr>\n                </thead>\n                <tbody>{this.renderOrders()}</tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nOrders.propTypes = {};\n\nconst mapStateToProps = state => ({\n  token: state.auth.token,\n  user: state.auth.user,\n});\n\nexport default connect(\n  mapStateToProps,\n  null\n)(Orders);\n"]},"metadata":{},"sourceType":"module"}