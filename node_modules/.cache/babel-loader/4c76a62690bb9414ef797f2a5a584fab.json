{"ast":null,"code":"var _jsxFileName = \"/home/hyper/Downloads/bookstore/src/components/signin.jsx\";\nimport React, { Component } from \"react\";\nimport loadjs from \"loadjs\";\nimport * as helper from \"./../helper\";\nimport { Redirect } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { storeToken } from \"../actions/authActions\";\n\nclass Signin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.checkAuth = () => {\n      if (Object.keys(this.props.token).length > 0) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.handleLogin = response => {\n      if (response.success) {\n        this.setState({\n          success: \"Login successfull\"\n        });\n        this.props.storeToken(response.success.token, response.user);\n        alert(\"Login successfull\");\n        this.props.history.push(`/`);\n      }\n\n      if (response.error) {\n        this.setState({\n          login_error: response.error\n        });\n      }\n    };\n\n    this.login = () => {\n      if (this.state.login_email != null && this.state.login_password != null) {\n        var url = helper.prefix + \"login\";\n        var data = {\n          email: this.state.login_email,\n          password: this.state.login_password\n        };\n        fetch(url, {\n          method: \"POST\",\n          // or 'PUT'\n          body: JSON.stringify(data),\n          // data can be `string` or {object}!\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\" // 'Authorization' : 'Bearer',\n\n          }\n        }).then(res => res.json()).then(response => this.handleLogin(response)).catch(error => console.error(\"Error:\", error));\n      } else {\n        this.setState({\n          login_error: \"please input all field\"\n        });\n      }\n    };\n\n    this.handleRegister = response => {\n      console.log(response);\n\n      if (response.success) {\n        this.setState({\n          success: \"Registration successfull\"\n        });\n        this.props.storeToken(response.success.token, response.user);\n        alert(\"Registration successfull\");\n        this.props.history.push(`/`);\n      }\n\n      if (response.error) {\n        this.setState({\n          reg_error: response.error\n        });\n      }\n    };\n\n    this.register = () => {\n      if (this.state.reg_email != null && this.state.reg_pass != null && this.state.c_password != null && this.state.reg_fullname != null) {\n        if (this.state.reg_pass !== this.state.c_password) {\n          this.setState({\n            reg_error: \"password and confirm password does not matched\"\n          });\n        } else {\n          var url = helper.prefix + \"register\";\n          var data = {\n            name: this.state.reg_fullname,\n            email: this.state.reg_email,\n            password: this.state.reg_pass,\n            c_password: this.state.c_password,\n            phone_no: this.state.phone_no\n          };\n          fetch(url, {\n            method: \"POST\",\n            // or 'PUT'\n            body: JSON.stringify(data),\n            // data can be `string` or {object}!\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Accept: \"application/json\" // 'Authorization' : 'Bearer',\n\n            }\n          }).then(res => res.json()).then(response => this.handleRegister(response)).catch(error => console.error(\"Error:\", error));\n        }\n      } else {\n        this.setState({\n          reg_error: \"please input all field\"\n        });\n      }\n    };\n\n    this.success = () => {\n      if (this.state.success != null) {\n        return React.createElement(\"div\", {\n          class: \"alert alert-success\",\n          role: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, this.state.success);\n      }\n    };\n\n    this.state = {\n      login_email: null,\n      login_password: null,\n      reg_fullname: null,\n      reg_email: null,\n      reg_pass: null,\n      c_password: null,\n      login_error: null,\n      reg_error: null,\n      success: null\n    };\n    window.scrollTo(0, 0);\n    console.log(\"fucking token \", this.props.token);\n  } // componentWillMount() {\n  //   loadjs(\"js/vendor/modernizr-3.5.0.min.js\", function() {\n  //     loadjs(\"js/vendor/jquery-3.2.1.min.js\", function() {\n  //       loadjs(\"js/popper.min.js\", function() {\n  //         loadjs(\"js/plugins.js\", function() {\n  //           loadjs(\"js/bootstrap.min.js\", function() {\n  //             loadjs(\"js/active.js\", function() {\n  //               loadjs(\"js/main.js\");\n  //             });\n  //           });\n  //         });\n  //       });\n  //     });\n  //   });\n  // }\n\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, this.checkAuth(), React.createElement(\"section\", {\n      class: \"my_account_area pt--20 pb--55 bg--white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, this.success(), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-lg-6 col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"my__account__wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      class: \"account__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"div\", {\n      class: \"account__form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input__box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Email address \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      type: \"email\",\n      value: this.state.login_email,\n      onChange: e => this.setState({\n        login_email: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"input__box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Password\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.login_password,\n      onChange: e => this.setState({\n        login_password: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      cla: \"mb-2\",\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, this.state.login_error != null ? this.state.login_error : null), React.createElement(\"div\", {\n      class: \"form__btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.login(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"label\", {\n      class: \"label-for-checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"rememberme\",\n      class: \"input-checkbox mr-2\",\n      name: \"rememberme\",\n      value: \"forever\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Remember me\"))), React.createElement(\"a\", {\n      class: \"forget_pass\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Lost your password?\")))), React.createElement(\"div\", {\n      class: \"col-lg-6 col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"my__account__wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      class: \"account__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"Register\"), React.createElement(\"form\", {\n      action: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"account__form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input__box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Full Name\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      type: \"name\",\n      value: this.state.reg_fullname,\n      onChange: e => this.setState({\n        reg_fullname: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"input__box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"Email address \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      type: \"email\",\n      value: this.state.reg_email,\n      onChange: e => this.setState({\n        reg_email: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"input__box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Phone number\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      type: \"name\",\n      value: this.state.phone_no,\n      onChange: e => this.setState({\n        phone_no: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"input__box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Password\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.reg_pass,\n      onChange: e => this.setState({\n        reg_pass: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"input__box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"Confirm password\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.c_password,\n      onChange: e => this.setState({\n        c_password: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      cla: \"mb-2\",\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, this.state.reg_error != null ? this.state.reg_error : null), React.createElement(\"div\", {\n      class: \"mt-2 form__btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.register(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, \"Register\"))))))))));\n  }\n\n}\n\nSignin.propTypes = {\n  fetchBooks: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  token: state.auth.token\n});\n\nexport default connect(mapStateToProps, {\n  storeToken\n})(Signin);","map":{"version":3,"sources":["/home/hyper/Downloads/bookstore/src/components/signin.jsx"],"names":["React","Component","loadjs","helper","Redirect","PropTypes","connect","storeToken","Signin","constructor","props","checkAuth","Object","keys","token","length","handleLogin","response","success","setState","user","alert","history","push","error","login_error","login","state","login_email","login_password","url","prefix","data","email","password","fetch","method","body","JSON","stringify","headers","Accept","then","res","json","catch","console","handleRegister","log","reg_error","register","reg_email","reg_pass","c_password","reg_fullname","name","phone_no","window","scrollTo","render","e","target","value","color","propTypes","fetchBooks","func","isRequired","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport loadjs from \"loadjs\";\r\nimport * as helper from \"./../helper\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { storeToken } from \"../actions/authActions\";\r\n\r\nclass Signin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      login_email: null,\r\n      login_password: null,\r\n      reg_fullname: null,\r\n      reg_email: null,\r\n      reg_pass: null,\r\n      c_password: null,\r\n      login_error: null,\r\n      reg_error: null,\r\n      success: null\r\n    };\r\n    window.scrollTo(0, 0);\r\n    console.log(\"fucking token \", this.props.token);\r\n  }\r\n\r\n  // componentWillMount() {\r\n  //   loadjs(\"js/vendor/modernizr-3.5.0.min.js\", function() {\r\n  //     loadjs(\"js/vendor/jquery-3.2.1.min.js\", function() {\r\n  //       loadjs(\"js/popper.min.js\", function() {\r\n  //         loadjs(\"js/plugins.js\", function() {\r\n  //           loadjs(\"js/bootstrap.min.js\", function() {\r\n  //             loadjs(\"js/active.js\", function() {\r\n  //               loadjs(\"js/main.js\");\r\n  //             });\r\n  //           });\r\n  //         });\r\n  //       });\r\n  //     });\r\n  //   });\r\n  // }\r\n\r\n  checkAuth = () => {\r\n    if (Object.keys(this.props.token).length > 0) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  handleLogin = response => {\r\n    if (response.success) {\r\n      this.setState({ success: \"Login successfull\" });\r\n      this.props.storeToken(response.success.token, response.user);\r\n      alert(\"Login successfull\");\r\n      this.props.history.push(`/`);\r\n    }\r\n    if (response.error) {\r\n      this.setState({ login_error: response.error });\r\n    }\r\n  };\r\n\r\n  login = () => {\r\n    if (this.state.login_email != null && this.state.login_password != null) {\r\n      var url = helper.prefix + \"login\";\r\n      var data = {\r\n        email: this.state.login_email,\r\n        password: this.state.login_password\r\n      };\r\n\r\n      fetch(url, {\r\n        method: \"POST\", // or 'PUT'\r\n        body: JSON.stringify(data), // data can be `string` or {object}!\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\"\r\n          // 'Authorization' : 'Bearer',\r\n        }\r\n      })\r\n        .then(res => res.json())\r\n        .then(response => this.handleLogin(response))\r\n        .catch(error => console.error(\"Error:\", error));\r\n    } else {\r\n      this.setState({ login_error: \"please input all field\" });\r\n    }\r\n  };\r\n\r\n  handleRegister = response => {\r\n    console.log(response);\r\n    if (response.success) {\r\n      this.setState({ success: \"Registration successfull\" });\r\n      this.props.storeToken(response.success.token, response.user);\r\n      alert(\"Registration successfull\");\r\n      this.props.history.push(`/`);\r\n    }\r\n    if (response.error) {\r\n      this.setState({ reg_error: response.error });\r\n    }\r\n  };\r\n\r\n  register = () => {\r\n      if (\r\n        this.state.reg_email != null &&\r\n        this.state.reg_pass != null &&\r\n        this.state.c_password != null &&\r\n        this.state.reg_fullname != null\r\n      ) {\r\n\t\tif (this.state.reg_pass !== this.state.c_password) {\r\n\t\t\tthis.setState({\r\n\t\t\t  reg_error: \"password and confirm password does not matched\"\r\n\t\t\t});\r\n\t\t  } else {\r\n\t\t\tvar url = helper.prefix + \"register\";\r\n\t\t\tvar data = {\r\n\t\t\t  name: this.state.reg_fullname,\r\n\t\t\t  email: this.state.reg_email,\r\n\t\t\t  password: this.state.reg_pass,\r\n\t\t\t  c_password: this.state.c_password,\r\n\t\t\t  phone_no: this.state.phone_no\r\n\t\t\t};\r\n\t\r\n\t\t\tfetch(url, {\r\n\t\t\t  method: \"POST\", // or 'PUT'\r\n\t\t\t  body: JSON.stringify(data), // data can be `string` or {object}!\r\n\t\t\t  headers: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\"\r\n\t\t\t\t// 'Authorization' : 'Bearer',\r\n\t\t\t  }\r\n\t\t\t})\r\n\t\t\t  .then(res => res.json())\r\n\t\t\t  .then(response => this.handleRegister(response))\r\n\t\t\t  .catch(error => console.error(\"Error:\", error));\r\n\t\t  }\r\n      } else {\r\n        this.setState({ reg_error: \"please input all field\" });\r\n      }\r\n  };\r\n\r\n  success = () => {\r\n    if (this.state.success != null) {\r\n      return (\r\n        <div class=\"alert alert-success\" role=\"alert\">\r\n          {this.state.success}\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.checkAuth()}\r\n        <section class=\"my_account_area pt--20 pb--55 bg--white\">\r\n          <div class=\"container\">\r\n            {this.success()}\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-6 col-12\">\r\n                <div class=\"my__account__wrapper\">\r\n                  <h3 class=\"account__title\">Login</h3>\r\n                  <div class=\"account__form\">\r\n                    <div class=\"input__box\">\r\n                      <label>\r\n                        Email address <span>*</span>\r\n                      </label>\r\n                      <input\r\n                        type=\"email\"\r\n                        value={this.state.login_email}\r\n                        onChange={e =>\r\n                          this.setState({ login_email: e.target.value })\r\n                        }\r\n                      />\r\n                    </div>\r\n                    <div class=\"input__box\">\r\n                      <label>\r\n                        Password<span>*</span>\r\n                      </label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={this.state.login_password}\r\n                        onChange={e =>\r\n                          this.setState({ login_password: e.target.value })\r\n                        }\r\n                      />\r\n                    </div>\r\n                    <span cla=\"mb-2\" style={{ color: \"red\" }}>\r\n                      {this.state.login_error != null\r\n                        ? this.state.login_error\r\n                        : null}\r\n                    </span>\r\n                    <div class=\"form__btn\">\r\n                      <button onClick={() => this.login()}>Login</button>\r\n                      <label class=\"label-for-checkbox\">\r\n                        <input\r\n                          id=\"rememberme\"\r\n                          class=\"input-checkbox mr-2\"\r\n                          name=\"rememberme\"\r\n                          value=\"forever\"\r\n                          type=\"checkbox\"\r\n                        />\r\n                        <span>Remember me</span>\r\n                      </label>\r\n                    </div>\r\n                    <a class=\"forget_pass\" href=\"#\">\r\n                      Lost your password?\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-6 col-12\">\r\n                <div class=\"my__account__wrapper\">\r\n                  <h3 class=\"account__title\">Register</h3>\r\n                  <form action=\"#\">\r\n                    <div class=\"account__form\">\r\n                      <div class=\"input__box\">\r\n                        <label>\r\n                          Full Name<span>*</span>\r\n                        </label>\r\n                        <input\r\n                          type=\"name\"\r\n                          value={this.state.reg_fullname}\r\n                          onChange={e =>\r\n                            this.setState({ reg_fullname: e.target.value })\r\n                          }\r\n                        />\r\n                      </div>\r\n                      <div class=\"input__box\">\r\n                        <label>\r\n                          Email address <span>*</span>\r\n                        </label>\r\n                        <input\r\n                          type=\"email\"\r\n                          value={this.state.reg_email}\r\n                          onChange={e =>\r\n                            this.setState({ reg_email: e.target.value })\r\n                          }\r\n                        />\r\n                      </div>\r\n                      <div class=\"input__box\">\r\n                        <label>\r\n                          Phone number<span>*</span>\r\n                        </label>\r\n                        <input\r\n                          type=\"name\"\r\n                          value={this.state.phone_no}\r\n                          onChange={e =>\r\n                            this.setState({ phone_no: e.target.value })\r\n                          }\r\n                        />\r\n                      </div>\r\n                      <div class=\"input__box\">\r\n                        <label>\r\n                          Password<span>*</span>\r\n                        </label>\r\n                        <input\r\n                          type=\"password\"\r\n                          value={this.state.reg_pass}\r\n                          onChange={e =>\r\n                            this.setState({ reg_pass: e.target.value })\r\n                          }\r\n                        />\r\n                      </div>\r\n                      <div class=\"input__box\">\r\n                        <label>\r\n                          Confirm password<span>*</span>\r\n                        </label>\r\n                        <input\r\n                          type=\"password\"\r\n                          value={this.state.c_password}\r\n                          onChange={e =>\r\n                            this.setState({ c_password: e.target.value })\r\n                          }\r\n                        />\r\n                      </div>\r\n                      <span cla=\"mb-2\" style={{ color: \"red\" }}>\r\n                        {this.state.reg_error != null\r\n                          ? this.state.reg_error\r\n                          : null}\r\n                      </span>\r\n                      <div class=\"mt-2 form__btn\">\r\n                        <button onClick={() => this.register()}>\r\n                          Register\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nSignin.propTypes = {\r\n  fetchBooks: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  token: state.auth.token\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { storeToken }\r\n)(Signin);\r\n"]},"metadata":{},"sourceType":"module"}