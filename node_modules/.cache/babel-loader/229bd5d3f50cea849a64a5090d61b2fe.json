{"ast":null,"code":"var _jsxFileName = \"/home/hyper/Downloads/bookstore/src/components/orders.jsx\";\nimport React, { Component } from \"react\";\nimport { createStore } from \"redux\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { updateCartQuantity, deleteFromCart, fetchBook, emptyCart } from \"../actions/bookActions\";\nimport * as helper from \"./../helper\";\nimport FontAwesome from \"react-fontawesome\";\nimport { parse } from \"@babel/core\";\n\nArray.prototype.sum = function (prop, quantity) {\n  var total = 0;\n\n  for (var i = 0, _len = this.length; i < _len; i++) {\n    total += parseInt(this[i][prop]) * parseInt(this[i][quantity]);\n  }\n\n  return total;\n};\n\nclass Orders extends Component {\n  constructor(props) {\n    super(props);\n\n    this.checkAuth = () => {\n      if (Object.keys(this.props.token).length <= 0) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.handleFetch = response => {\n      console.log(\"fuuuuuuuuuuuuuck \", response);\n\n      if (response.success) {\n        this.setState({\n          orders: response.orders\n        });\n      }\n    };\n\n    this.fetchOrders = () => {\n      console.log(\"asd a     ssss   \", this.props.token);\n      var url = helper.prefix + \"orders\";\n      fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + this.props.token\n        }\n      }).then(res => res.json()).then(response => this.handleFetch(response)).catch(error => console.error(\"Error:\", error));\n    };\n\n    this.renderOrders = () => {\n      if (this.state.orders != null) {\n        return this.state.orders.map((order, index) => {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            scope: \"row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, order.id), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: order.cover == null ? \"images/books/dummy.png\" : order.cover,\n            style: {\n              width: 100,\n              height: 130\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }), React.createElement(\"p\", {\n            style: {\n              fontSize: 16\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }, order.book_name))), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 81\n            },\n            __self: this\n          }, order.quantity), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82\n            },\n            __self: this\n          }, order.total_price), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            style: {\n              fontSize: 16\n            },\n            class: order.is_seen_by_admin == 0 ? \"text-danger\" : \"text-success\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          }, order.is_seen_by_admin == 0 ? \"Not seen yet\" : \"Seen by admin\")), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            style: {\n              fontSize: 16\n            },\n            class: order.is_completed == 0 ? \"text-danger\" : \"text-success\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }, order.is_completed == 0 ? \"Not delivered yet\" : \"Delivered\")));\n        });\n      }\n    };\n\n    this.state = {\n      transection_id: null,\n      orders: null\n    };\n    window.scrollTo(0, 0);\n    this.fetchOrders();\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.checkAuth(), React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      class: \"m-2 mb-3\",\n      style: {\n        fontSize: 30\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Orders\"), React.createElement(\"div\", {\n      class: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"table-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      class: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"order id\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Book name\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Total cost\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Is seen by admin\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Delivery status\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, this.renderOrders()))))));\n  }\n\n}\n\nOrders.propTypes = {};\n\nconst mapStateToProps = state => ({\n  token: state.auth.token,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, null)(Orders);","map":{"version":3,"sources":["/home/hyper/Downloads/bookstore/src/components/orders.jsx"],"names":["React","Component","createStore","Link","Redirect","PropTypes","connect","updateCartQuantity","deleteFromCart","fetchBook","emptyCart","helper","FontAwesome","parse","Array","prototype","sum","prop","quantity","total","i","_len","length","parseInt","Orders","constructor","props","checkAuth","Object","keys","token","handleFetch","response","console","log","success","setState","orders","fetchOrders","url","prefix","fetch","method","headers","Accept","Authorization","then","res","json","catch","error","renderOrders","state","map","order","index","id","cover","width","height","fontSize","book_name","total_price","is_seen_by_admin","is_completed","transection_id","window","scrollTo","render","propTypes","mapStateToProps","auth","user"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SACEC,kBADF,EAEEC,cAFF,EAGEC,SAHF,EAIEC,SAJF,QAKO,wBALP;AAMA,OAAO,KAAKC,MAAZ,MAAwB,aAAxB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,SAASC,KAAT,QAAsB,aAAtB;;AAEAC,KAAK,CAACC,SAAN,CAAgBC,GAAhB,GAAsB,UAASC,IAAT,EAAeC,QAAf,EAAyB;AAC7C,MAAIC,KAAK,GAAG,CAAZ;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,IAAI,GAAG,KAAKC,MAA5B,EAAoCF,CAAC,GAAGC,IAAxC,EAA8CD,CAAC,EAA/C,EAAmD;AACjDD,IAAAA,KAAK,IAAII,QAAQ,CAAC,KAAKH,CAAL,EAAQH,IAAR,CAAD,CAAR,GAA0BM,QAAQ,CAAC,KAAKH,CAAL,EAAQF,QAAR,CAAD,CAA3C;AACD;;AACD,SAAOC,KAAP;AACD,CAND;;AAQA,MAAMK,MAAN,SAAqBvB,SAArB,CAA+B;AAC7BwB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAUnBC,SAVmB,GAUP,MAAM;AAChB,UAAIC,MAAM,CAACC,IAAP,CAAY,KAAKH,KAAL,CAAWI,KAAvB,EAA8BR,MAA9B,IAAwC,CAA5C,EAA+C;AAC7C,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF,KAdkB;;AAAA,SAgBnBS,WAhBmB,GAgBLC,QAAQ,IAAI;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,QAAjC;;AACA,UAAIA,QAAQ,CAACG,OAAb,EAAsB;AACpB,aAAKC,QAAL,CAAc;AAAEC,UAAAA,MAAM,EAAEL,QAAQ,CAACK;AAAnB,SAAd;AACD;AACF,KArBkB;;AAAA,SAuBnBC,WAvBmB,GAuBL,MAAM;AAClBL,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAgC,KAAKR,KAAL,CAAWI,KAA3C;AACA,UAAIS,GAAG,GAAG5B,MAAM,CAAC6B,MAAP,GAAgB,QAA1B;AAEAC,MAAAA,KAAK,CAACF,GAAD,EAAM;AACTG,QAAAA,MAAM,EAAE,KADC;AAETC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,MAAM,EAAE,kBAFD;AAGPC,UAAAA,aAAa,EAAE,YAAY,KAAKnB,KAAL,CAAWI;AAH/B;AAFA,OAAN,CAAL,CAQGgB,IARH,CAQQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARf,EASGF,IATH,CASQd,QAAQ,IAAI,KAAKD,WAAL,CAAiBC,QAAjB,CATpB,EAUGiB,KAVH,CAUSC,KAAK,IAAIjB,OAAO,CAACiB,KAAR,CAAc,QAAd,EAAwBA,KAAxB,CAVlB;AAWD,KAtCkB;;AAAA,SAwCnBC,YAxCmB,GAwCJ,MAAM;AACnB,UAAI,KAAKC,KAAL,CAAWf,MAAX,IAAqB,IAAzB,EAA+B;AAC7B,eAAO,KAAKe,KAAL,CAAWf,MAAX,CAAkBgB,GAAlB,CAAsB,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAC7C,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAI,YAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAiBD,KAAK,CAACE,EAAvB,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AACE,YAAA,GAAG,EAAEF,KAAK,CAACG,KAAN,IAAe,IAAf,GAAsB,wBAAtB,GAAiDH,KAAK,CAACG,KAD9D;AAEE,YAAA,KAAK,EAAE;AAAEC,cAAAA,KAAK,EAAE,GAAT;AAAcC,cAAAA,MAAM,EAAE;AAAtB,aAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAKE;AAAG,YAAA,KAAK,EAAE;AAAEC,cAAAA,QAAQ,EAAE;AAAZ,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA6BN,KAAK,CAACO,SAAnC,CALF,CADF,CAFF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKP,KAAK,CAACpC,QAAX,CAXF,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKoC,KAAK,CAACQ,WAAX,CAZF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AACE,YAAA,KAAK,EAAE;AAAEF,cAAAA,QAAQ,EAAE;AAAZ,aADT;AAEE,YAAA,KAAK,EACHN,KAAK,CAACS,gBAAN,IAA0B,CAA1B,GAA8B,aAA9B,GAA8C,cAHlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAMGT,KAAK,CAACS,gBAAN,IAA0B,CAA1B,GAA8B,cAA9B,GAA+C,eANlD,CADF,CAbF,EAuBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AACE,YAAA,KAAK,EAAE;AAAEH,cAAAA,QAAQ,EAAE;AAAZ,aADT;AAEE,YAAA,KAAK,EAAEN,KAAK,CAACU,YAAN,IAAsB,CAAtB,GAA0B,aAA1B,GAA0C,cAFnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAIGV,KAAK,CAACU,YAAN,IAAsB,CAAtB,GAA0B,mBAA1B,GAAgD,WAJnD,CADF,CAvBF,CADF;AAkCD,SAnCM,CAAP;AAoCD;AACF,KA/EkB;;AAEjB,SAAKZ,KAAL,GAAa;AACXa,MAAAA,cAAc,EAAE,IADL;AAEX5B,MAAAA,MAAM,EAAE;AAFG,KAAb;AAIA6B,IAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACA,SAAK7B,WAAL;AACD;;AAyED8B,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKzC,SAAL,EADH,EAEE;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,KAAK,EAAC,UAAT;AAAoB,MAAA,KAAK,EAAE;AAAEiC,QAAAA,QAAQ,EAAE;AAAZ,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAIE;AAAK,MAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,kBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,KAAK,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,EAGE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,EAIE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,EAKE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BALF,EAME;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBANF,CADF,CADF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAQ,KAAKT,YAAL,EAAR,CAXF,CADF,CADF,CAJF,CAFF,CADF;AA2BD;;AA9G4B;;AAiH/B3B,MAAM,CAAC6C,SAAP,GAAmB,EAAnB;;AAEA,MAAMC,eAAe,GAAGlB,KAAK,KAAK;AAChCtB,EAAAA,KAAK,EAAEsB,KAAK,CAACmB,IAAN,CAAWzC,KADc;AAEhC0C,EAAAA,IAAI,EAAEpB,KAAK,CAACmB,IAAN,CAAWC;AAFe,CAAL,CAA7B;;AAKA,eAAelE,OAAO,CACpBgE,eADoB,EAEpB,IAFoB,CAAP,CAGb9C,MAHa,CAAf","sourcesContent":["import React, { Component } from \"react\";\n\nimport { createStore } from \"redux\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  updateCartQuantity,\n  deleteFromCart,\n  fetchBook,\n  emptyCart\n} from \"../actions/bookActions\";\nimport * as helper from \"./../helper\";\nimport FontAwesome from \"react-fontawesome\";\nimport { parse } from \"@babel/core\";\n\nArray.prototype.sum = function(prop, quantity) {\n  var total = 0;\n  for (var i = 0, _len = this.length; i < _len; i++) {\n    total += parseInt(this[i][prop]) * parseInt(this[i][quantity]);\n  }\n  return total;\n};\n\nclass Orders extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transection_id: null,\n      orders: null\n    };\n    window.scrollTo(0, 0);\n    this.fetchOrders()\n  }\n\n  checkAuth = () => {\n    if (Object.keys(this.props.token).length <= 0) {\n      return <Redirect to=\"/\" />;\n    }\n  };\n\n  handleFetch = response => {\n    console.log(\"fuuuuuuuuuuuuuck \", response);\n    if (response.success) {\n      this.setState({ orders: response.orders });\n    }\n  };\n\n  fetchOrders = () => {\n    console.log(\"asd a     ssss   \",this.props.token)\n    var url = helper.prefix + \"orders\";\n\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + this.props.token\n      }\n    })\n      .then(res => res.json())\n      .then(response => this.handleFetch(response))\n      .catch(error => console.error(\"Error:\", error));\n  };\n\n  renderOrders = () => {\n    if (this.state.orders != null) {\n      return this.state.orders.map((order, index) => {\n        return (\n          <tr>\n            <th scope=\"row\">{order.id}</th>\n            <td>\n              <div>\n                  <img\n                    src={order.cover == null ? \"images/books/dummy.png\" : order.cover}\n                    style={{ width: 100, height: 130 }}\n                  />\n                <p style={{ fontSize: 16 }}>{order.book_name}</p>\n              </div>\n            </td>\n            <td>{order.quantity}</td>\n            <td>{order.total_price}</td>\n            <td>\n              <p\n                style={{ fontSize: 16 }}\n                class={\n                  order.is_seen_by_admin == 0 ? \"text-danger\" : \"text-success\"\n                }\n              >\n                {order.is_seen_by_admin == 0 ? \"Not seen yet\" : \"Seen by admin\"}\n              </p>\n            </td>\n            <td>\n              <p\n                style={{ fontSize: 16 }}\n                class={order.is_completed == 0 ? \"text-danger\" : \"text-success\"}\n              >\n                {order.is_completed == 0 ? \"Not delivered yet\" : \"Delivered\"}\n              </p>\n            </td>\n          </tr>\n        );\n      });\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.checkAuth()}\n        <div class=\"container\">\n          <p class=\"m-2 mb-3\" style={{ fontSize: 30 }}>\n            Orders\n          </p>\n          <div class=\"card\">\n            <div class=\"table-responsive\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\">order id</th>\n                    <th scope=\"col\">Book name</th>\n                    <th scope=\"col\">Quantity</th>\n                    <th scope=\"col\">Total cost</th>\n                    <th scope=\"col\">Is seen by admin</th>\n                    <th scope=\"col\">Delivery status</th>\n                  </tr>\n                </thead>\n                <tbody>{this.renderOrders()}</tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nOrders.propTypes = {};\n\nconst mapStateToProps = state => ({\n  token: state.auth.token,\n  user: state.auth.user,\n});\n\nexport default connect(\n  mapStateToProps,\n  null\n)(Orders);\n"]},"metadata":{},"sourceType":"module"}