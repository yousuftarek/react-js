{"ast":null,"code":"import _classCallCheck from\"/home/hyper/Downloads/gronthik/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hyper/Downloads/gronthik/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/hyper/Downloads/gronthik/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/hyper/Downloads/gronthik/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/hyper/Downloads/gronthik/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import loadjs from\"loadjs\";import*as helper from\"./../helper\";import{Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{storeToken}from\"../actions/authActions\";var Signin=/*#__PURE__*/function(_Component){_inherits(Signin,_Component);function Signin(props){var _this;_classCallCheck(this,Signin);_this=_possibleConstructorReturn(this,_getPrototypeOf(Signin).call(this,props));_this.checkAuth=function(){if(Object.keys(_this.props.token).length>0){return React.createElement(Redirect,{to:\"/\"});}};_this.handleLogin=function(response){if(response.success){_this.setState({success:\"Login successfull\"});_this.props.storeToken(response.success.token,response.user);alert(\"Login successfull\");_this.props.history.push(\"/\");}if(response.error){_this.setState({login_error:response.error});}};_this.login=function(){if(_this.state.login_email!=null&&_this.state.login_password!=null){var url=helper.prefix+\"login\";var data={email:_this.state.login_email,password:_this.state.login_password};fetch(url,{method:\"POST\",// or 'PUT'\nbody:JSON.stringify(data),// data can be `string` or {object}!\nheaders:{\"Content-Type\":\"application/json\",Accept:\"application/json\"// 'Authorization' : 'Bearer',\n}}).then(function(res){return res.json();}).then(function(response){return _this.handleLogin(response);}).catch(function(error){return console.error(\"Error:\",error);});}else{_this.setState({login_error:\"please input all field\"});}};_this.handleRegister=function(response){console.log(response);if(response.success){_this.setState({success:\"Registration successfull\"});_this.props.storeToken(response.success.token,response.user);alert(\"Registration successfull\");_this.props.history.push(\"/\");}if(response.error){_this.setState({reg_error:response.error});}};_this.register=function(){if(_this.state.reg_email!=null&&_this.state.reg_pass!=null&&_this.state.c_password!=null&&_this.state.reg_fullname!=null){if(_this.state.reg_pass!==_this.state.c_password){_this.setState({reg_error:\"password and confirm password does not matched\"});}else{var url=helper.prefix+\"register\";var data={name:_this.state.reg_fullname,email:_this.state.reg_email,password:_this.state.reg_pass,c_password:_this.state.c_password,phone_no:_this.state.phone_no};fetch(url,{method:\"POST\",// or 'PUT'\nbody:JSON.stringify(data),// data can be `string` or {object}!\nheaders:{\"Content-Type\":\"application/json\",Accept:\"application/json\"// 'Authorization' : 'Bearer',\n}}).then(function(res){return res.json();}).then(function(response){return _this.handleRegister(response);}).catch(function(error){return console.error(\"Error:\",error);});}}else{_this.setState({reg_error:\"please input all field\"});}};_this.success=function(){if(_this.state.success!=null){return React.createElement(\"div\",{class:\"alert alert-success\",role:\"alert\"},_this.state.success);}};_this.state={login_email:null,login_password:null,reg_fullname:null,reg_email:null,reg_pass:null,c_password:null,login_error:null,reg_error:null,success:null};window.scrollTo(0,0);console.log(\"fucking token \",_this.props.token);return _this;}// componentWillMount() {\n//   loadjs(\"js/vendor/modernizr-3.5.0.min.js\", function() {\n//     loadjs(\"js/vendor/jquery-3.2.1.min.js\", function() {\n//       loadjs(\"js/popper.min.js\", function() {\n//         loadjs(\"js/plugins.js\", function() {\n//           loadjs(\"js/bootstrap.min.js\", function() {\n//             loadjs(\"js/active.js\", function() {\n//               loadjs(\"js/main.js\");\n//             });\n//           });\n//         });\n//       });\n//     });\n//   });\n// }\n_createClass(Signin,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(React.Fragment,null,this.checkAuth(),React.createElement(\"section\",{class:\"my_account_area pt--20 pb--55 bg--white\"},React.createElement(\"div\",{class:\"container\"},this.success(),React.createElement(\"div\",{class:\"row\"},React.createElement(\"div\",{class:\"col-lg-6 col-12\"},React.createElement(\"div\",{class:\"my__account__wrapper\"},React.createElement(\"h3\",{class:\"account__title\"},\"Login\"),React.createElement(\"div\",{class:\"account__form\"},React.createElement(\"div\",{class:\"input__box\"},React.createElement(\"label\",null,\"Email address \",React.createElement(\"span\",null,\"*\")),React.createElement(\"input\",{type:\"email\",value:this.state.login_email,onChange:function onChange(e){return _this2.setState({login_email:e.target.value});}})),React.createElement(\"div\",{class:\"input__box\"},React.createElement(\"label\",null,\"Password\",React.createElement(\"span\",null,\"*\")),React.createElement(\"input\",{type:\"password\",value:this.state.login_password,onChange:function onChange(e){return _this2.setState({login_password:e.target.value});}})),React.createElement(\"span\",{cla:\"mb-2\",style:{color:\"red\"}},this.state.login_error!=null?this.state.login_error:null),React.createElement(\"div\",{class:\"form__btn\"},React.createElement(\"button\",{onClick:function onClick(){return _this2.login();}},\"Login\"),React.createElement(\"label\",{class:\"label-for-checkbox\"},React.createElement(\"input\",{id:\"rememberme\",class:\"input-checkbox mr-2\",name:\"rememberme\",value:\"forever\",type:\"checkbox\"}),React.createElement(\"span\",null,\"Remember me\"))),React.createElement(\"a\",{class:\"forget_pass\",href:\"#\"},\"Lost your password?\")))),React.createElement(\"div\",{class:\"col-lg-6 col-12\"},React.createElement(\"div\",{class:\"my__account__wrapper\"},React.createElement(\"h3\",{class:\"account__title\"},\"Register\"),React.createElement(\"form\",{action:\"#\"},React.createElement(\"div\",{class:\"account__form\"},React.createElement(\"div\",{class:\"input__box\"},React.createElement(\"label\",null,\"Full Name\",React.createElement(\"span\",null,\"*\")),React.createElement(\"input\",{type:\"name\",value:this.state.reg_fullname,onChange:function onChange(e){return _this2.setState({reg_fullname:e.target.value});}})),React.createElement(\"div\",{class:\"input__box\"},React.createElement(\"label\",null,\"Email address \",React.createElement(\"span\",null,\"*\")),React.createElement(\"input\",{type:\"email\",value:this.state.reg_email,onChange:function onChange(e){return _this2.setState({reg_email:e.target.value});}})),React.createElement(\"div\",{class:\"input__box\"},React.createElement(\"label\",null,\"Phone number\",React.createElement(\"span\",null,\"*\")),React.createElement(\"input\",{type:\"name\",value:this.state.phone_no,onChange:function onChange(e){return _this2.setState({phone_no:e.target.value});}})),React.createElement(\"div\",{class:\"input__box\"},React.createElement(\"label\",null,\"Password\",React.createElement(\"span\",null,\"*\")),React.createElement(\"input\",{type:\"password\",value:this.state.reg_pass,onChange:function onChange(e){return _this2.setState({reg_pass:e.target.value});}})),React.createElement(\"div\",{class:\"input__box\"},React.createElement(\"label\",null,\"Confirm password\",React.createElement(\"span\",null,\"*\")),React.createElement(\"input\",{type:\"password\",value:this.state.c_password,onChange:function onChange(e){return _this2.setState({c_password:e.target.value});}})),React.createElement(\"span\",{cla:\"mb-2\",style:{color:\"red\"}},this.state.reg_error!=null?this.state.reg_error:null),React.createElement(\"div\",{class:\"mt-2 form__btn\"},React.createElement(\"button\",{onClick:function onClick(){return _this2.register();}},\"Register\"))))))))));}}]);return Signin;}(Component);var mapStateToProps=function mapStateToProps(state){return{token:state.auth.token};};export default connect(mapStateToProps,{storeToken:storeToken})(Signin);","map":{"version":3,"sources":["/home/hyper/Downloads/gronthik/bookstore/src/components/signin.jsx"],"names":["React","Component","loadjs","helper","Redirect","connect","storeToken","Signin","props","checkAuth","Object","keys","token","length","handleLogin","response","success","setState","user","alert","history","push","error","login_error","login","state","login_email","login_password","url","prefix","data","email","password","fetch","method","body","JSON","stringify","headers","Accept","then","res","json","catch","console","handleRegister","log","reg_error","register","reg_email","reg_pass","c_password","reg_fullname","name","phone_no","window","scrollTo","e","target","value","color","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport loadjs from \"loadjs\";\nimport * as helper from \"./../helper\";\nimport { Redirect } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { storeToken } from \"../actions/authActions\";\n\nclass Signin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login_email: null,\n      login_password: null,\n      reg_fullname: null,\n      reg_email: null,\n      reg_pass: null,\n      c_password: null,\n      login_error: null,\n      reg_error: null,\n      success: null\n    };\n    window.scrollTo(0, 0);\n    console.log(\"fucking token \", this.props.token);\n  }\n\n  // componentWillMount() {\n  //   loadjs(\"js/vendor/modernizr-3.5.0.min.js\", function() {\n  //     loadjs(\"js/vendor/jquery-3.2.1.min.js\", function() {\n  //       loadjs(\"js/popper.min.js\", function() {\n  //         loadjs(\"js/plugins.js\", function() {\n  //           loadjs(\"js/bootstrap.min.js\", function() {\n  //             loadjs(\"js/active.js\", function() {\n  //               loadjs(\"js/main.js\");\n  //             });\n  //           });\n  //         });\n  //       });\n  //     });\n  //   });\n  // }\n\n  checkAuth = () => {\n    if (Object.keys(this.props.token).length > 0) {\n      return <Redirect to=\"/\" />;\n    }\n  };\n\n  handleLogin = response => {\n    if (response.success) {\n      this.setState({ success: \"Login successfull\" });\n      this.props.storeToken(response.success.token, response.user);\n      alert(\"Login successfull\");\n      this.props.history.push(`/`);\n    }\n    if (response.error) {\n      this.setState({ login_error: response.error });\n    }\n  };\n\n  login = () => {\n    if (this.state.login_email != null && this.state.login_password != null) {\n      var url = helper.prefix + \"login\";\n      var data = {\n        email: this.state.login_email,\n        password: this.state.login_password\n      };\n\n      fetch(url, {\n        method: \"POST\", // or 'PUT'\n        body: JSON.stringify(data), // data can be `string` or {object}!\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n          // 'Authorization' : 'Bearer',\n        }\n      })\n        .then(res => res.json())\n        .then(response => this.handleLogin(response))\n        .catch(error => console.error(\"Error:\", error));\n    } else {\n      this.setState({ login_error: \"please input all field\" });\n    }\n  };\n\n  handleRegister = response => {\n    console.log(response);\n    if (response.success) {\n      this.setState({ success: \"Registration successfull\" });\n      this.props.storeToken(response.success.token, response.user);\n      alert(\"Registration successfull\");\n      this.props.history.push(`/`);\n    }\n    if (response.error) {\n      this.setState({ reg_error: response.error });\n    }\n  };\n\n  register = () => {\n      if (\n        this.state.reg_email != null &&\n        this.state.reg_pass != null &&\n        this.state.c_password != null &&\n        this.state.reg_fullname != null\n      ) {\n\t\tif (this.state.reg_pass !== this.state.c_password) {\n\t\t\tthis.setState({\n\t\t\t  reg_error: \"password and confirm password does not matched\"\n\t\t\t});\n\t\t  } else {\n\t\t\tvar url = helper.prefix + \"register\";\n\t\t\tvar data = {\n\t\t\t  name: this.state.reg_fullname,\n\t\t\t  email: this.state.reg_email,\n\t\t\t  password: this.state.reg_pass,\n\t\t\t  c_password: this.state.c_password,\n\t\t\t  phone_no: this.state.phone_no\n\t\t\t};\n\t\n\t\t\tfetch(url, {\n\t\t\t  method: \"POST\", // or 'PUT'\n\t\t\t  body: JSON.stringify(data), // data can be `string` or {object}!\n\t\t\t  headers: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tAccept: \"application/json\"\n\t\t\t\t// 'Authorization' : 'Bearer',\n\t\t\t  }\n\t\t\t})\n\t\t\t  .then(res => res.json())\n\t\t\t  .then(response => this.handleRegister(response))\n\t\t\t  .catch(error => console.error(\"Error:\", error));\n\t\t  }\n      } else {\n        this.setState({ reg_error: \"please input all field\" });\n      }\n  };\n\n  success = () => {\n    if (this.state.success != null) {\n      return (\n        <div class=\"alert alert-success\" role=\"alert\">\n          {this.state.success}\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.checkAuth()}\n        <section class=\"my_account_area pt--20 pb--55 bg--white\">\n          <div class=\"container\">\n            {this.success()}\n            <div class=\"row\">\n              <div class=\"col-lg-6 col-12\">\n                <div class=\"my__account__wrapper\">\n                  <h3 class=\"account__title\">Login</h3>\n                  <div class=\"account__form\">\n                    <div class=\"input__box\">\n                      <label>\n                        Email address <span>*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        value={this.state.login_email}\n                        onChange={e =>\n                          this.setState({ login_email: e.target.value })\n                        }\n                      />\n                    </div>\n                    <div class=\"input__box\">\n                      <label>\n                        Password<span>*</span>\n                      </label>\n                      <input\n                        type=\"password\"\n                        value={this.state.login_password}\n                        onChange={e =>\n                          this.setState({ login_password: e.target.value })\n                        }\n                      />\n                    </div>\n                    <span cla=\"mb-2\" style={{ color: \"red\" }}>\n                      {this.state.login_error != null\n                        ? this.state.login_error\n                        : null}\n                    </span>\n                    <div class=\"form__btn\">\n                      <button onClick={() => this.login()}>Login</button>\n                      <label class=\"label-for-checkbox\">\n                        <input\n                          id=\"rememberme\"\n                          class=\"input-checkbox mr-2\"\n                          name=\"rememberme\"\n                          value=\"forever\"\n                          type=\"checkbox\"\n                        />\n                        <span>Remember me</span>\n                      </label>\n                    </div>\n                    <a class=\"forget_pass\" href=\"#\">\n                      Lost your password?\n                    </a>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-lg-6 col-12\">\n                <div class=\"my__account__wrapper\">\n                  <h3 class=\"account__title\">Register</h3>\n                  <form action=\"#\">\n                    <div class=\"account__form\">\n                      <div class=\"input__box\">\n                        <label>\n                          Full Name<span>*</span>\n                        </label>\n                        <input\n                          type=\"name\"\n                          value={this.state.reg_fullname}\n                          onChange={e =>\n                            this.setState({ reg_fullname: e.target.value })\n                          }\n                        />\n                      </div>\n                      <div class=\"input__box\">\n                        <label>\n                          Email address <span>*</span>\n                        </label>\n                        <input\n                          type=\"email\"\n                          value={this.state.reg_email}\n                          onChange={e =>\n                            this.setState({ reg_email: e.target.value })\n                          }\n                        />\n                      </div>\n                      <div class=\"input__box\">\n                        <label>\n                          Phone number<span>*</span>\n                        </label>\n                        <input\n                          type=\"name\"\n                          value={this.state.phone_no}\n                          onChange={e =>\n                            this.setState({ phone_no: e.target.value })\n                          }\n                        />\n                      </div>\n                      <div class=\"input__box\">\n                        <label>\n                          Password<span>*</span>\n                        </label>\n                        <input\n                          type=\"password\"\n                          value={this.state.reg_pass}\n                          onChange={e =>\n                            this.setState({ reg_pass: e.target.value })\n                          }\n                        />\n                      </div>\n                      <div class=\"input__box\">\n                        <label>\n                          Confirm password<span>*</span>\n                        </label>\n                        <input\n                          type=\"password\"\n                          value={this.state.c_password}\n                          onChange={e =>\n                            this.setState({ c_password: e.target.value })\n                          }\n                        />\n                      </div>\n                      <span cla=\"mb-2\" style={{ color: \"red\" }}>\n                        {this.state.reg_error != null\n                          ? this.state.reg_error\n                          : null}\n                      </span>\n                      <div class=\"mt-2 form__btn\">\n                        <button onClick={() => this.register()}>\n                          Register\n                        </button>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </React.Fragment>\n    );\n  }\n}\n\nSignin.propTypes = {\n  fetchBooks: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  token: state.auth.token\n});\n\nexport default connect(\n  mapStateToProps,\n  { storeToken }\n)(Signin);\n"]},"metadata":{},"sourceType":"module"}