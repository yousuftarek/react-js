{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/home/hyper/Downloads/gronthik/bookstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createCachedDescriptors = createCachedDescriptors;\nexports.createUncachedDescriptors = createUncachedDescriptors;\nexports.createDescriptor = createDescriptor;\n\nvar _files = require(\"./files\");\n\nvar _item = require(\"./item\");\n\nvar _caching = require(\"./caching\");\n\nfunction isEqualDescriptor(a, b) {\n  return a.name === b.name && a.value === b.value && a.options === b.options && a.dirname === b.dirname && a.alias === b.alias && a.ownPass === b.ownPass && (a.file && a.file.request) === (b.file && b.file.request) && (a.file && a.file.resolved) === (b.file && b.file.resolved);\n}\n\nfunction createCachedDescriptors(dirname, options, alias) {\n  var plugins = options.plugins,\n      presets = options.presets,\n      passPerPreset = options.passPerPreset;\n  return {\n    options: options,\n    plugins: plugins ? function () {\n      return createCachedPluginDescriptors(plugins, dirname)(alias);\n    } : function () {\n      return [];\n    },\n    presets: presets ? function () {\n      return createCachedPresetDescriptors(presets, dirname)(alias)(!!passPerPreset);\n    } : function () {\n      return [];\n    }\n  };\n}\n\nfunction createUncachedDescriptors(dirname, options, alias) {\n  var _plugins;\n\n  var _presets;\n\n  return {\n    options: options,\n    plugins: function plugins() {\n      if (!_plugins) {\n        _plugins = createPluginDescriptors(options.plugins || [], dirname, alias);\n      }\n\n      return _plugins;\n    },\n    presets: function presets() {\n      if (!_presets) {\n        _presets = createPresetDescriptors(options.presets || [], dirname, alias, !!options.passPerPreset);\n      }\n\n      return _presets;\n    }\n  };\n}\n\nvar PRESET_DESCRIPTOR_CACHE = new WeakMap();\nvar createCachedPresetDescriptors = (0, _caching.makeWeakCache)(function (items, cache) {\n  var dirname = cache.using(function (dir) {\n    return dir;\n  });\n  return (0, _caching.makeStrongCache)(function (alias) {\n    return (0, _caching.makeStrongCache)(function (passPerPreset) {\n      return createPresetDescriptors(items, dirname, alias, passPerPreset).map(function (desc) {\n        return loadCachedDescriptor(PRESET_DESCRIPTOR_CACHE, desc);\n      });\n    });\n  });\n});\nvar PLUGIN_DESCRIPTOR_CACHE = new WeakMap();\nvar createCachedPluginDescriptors = (0, _caching.makeWeakCache)(function (items, cache) {\n  var dirname = cache.using(function (dir) {\n    return dir;\n  });\n  return (0, _caching.makeStrongCache)(function (alias) {\n    return createPluginDescriptors(items, dirname, alias).map(function (desc) {\n      return loadCachedDescriptor(PLUGIN_DESCRIPTOR_CACHE, desc);\n    });\n  });\n});\nvar DEFAULT_OPTIONS = {};\n\nfunction loadCachedDescriptor(cache, desc) {\n  var value = desc.value,\n      _desc$options = desc.options,\n      options = _desc$options === void 0 ? DEFAULT_OPTIONS : _desc$options;\n  if (options === false) return desc;\n  var cacheByOptions = cache.get(value);\n\n  if (!cacheByOptions) {\n    cacheByOptions = new WeakMap();\n    cache.set(value, cacheByOptions);\n  }\n\n  var possibilities = cacheByOptions.get(options);\n\n  if (!possibilities) {\n    possibilities = [];\n    cacheByOptions.set(options, possibilities);\n  }\n\n  if (possibilities.indexOf(desc) === -1) {\n    var matches = possibilities.filter(function (possibility) {\n      return isEqualDescriptor(possibility, desc);\n    });\n\n    if (matches.length > 0) {\n      return matches[0];\n    }\n\n    possibilities.push(desc);\n  }\n\n  return desc;\n}\n\nfunction createPresetDescriptors(items, dirname, alias, passPerPreset) {\n  return createDescriptors(\"preset\", items, dirname, alias, passPerPreset);\n}\n\nfunction createPluginDescriptors(items, dirname, alias) {\n  return createDescriptors(\"plugin\", items, dirname, alias);\n}\n\nfunction createDescriptors(type, items, dirname, alias, ownPass) {\n  var descriptors = items.map(function (item, index) {\n    return createDescriptor(item, dirname, {\n      type: type,\n      alias: \"\".concat(alias, \"$\").concat(index),\n      ownPass: !!ownPass\n    });\n  });\n  assertNoDuplicates(descriptors);\n  return descriptors;\n}\n\nfunction createDescriptor(pair, dirname, _ref) {\n  var type = _ref.type,\n      alias = _ref.alias,\n      ownPass = _ref.ownPass;\n  var desc = (0, _item.getItemDescriptor)(pair);\n\n  if (desc) {\n    return desc;\n  }\n\n  var name;\n  var options;\n  var value = pair;\n\n  if (Array.isArray(value)) {\n    if (value.length === 3) {\n      var _value = value;\n\n      var _value2 = _slicedToArray(_value, 3);\n\n      value = _value2[0];\n      options = _value2[1];\n      name = _value2[2];\n    } else {\n      var _value3 = value;\n\n      var _value4 = _slicedToArray(_value3, 2);\n\n      value = _value4[0];\n      options = _value4[1];\n    }\n  }\n\n  var file = undefined;\n  var filepath = null;\n\n  if (typeof value === \"string\") {\n    if (typeof type !== \"string\") {\n      throw new Error(\"To resolve a string-based item, the type of item must be given\");\n    }\n\n    var resolver = type === \"plugin\" ? _files.loadPlugin : _files.loadPreset;\n    var request = value;\n\n    var _resolver = resolver(value, dirname);\n\n    filepath = _resolver.filepath;\n    value = _resolver.value;\n    file = {\n      request: request,\n      resolved: filepath\n    };\n  }\n\n  if (!value) {\n    throw new Error(\"Unexpected falsy value: \".concat(String(value)));\n  }\n\n  if (typeof value === \"object\" && value.__esModule) {\n    if (value.default) {\n      value = value.default;\n    } else {\n      throw new Error(\"Must export a default export when using ES6 modules.\");\n    }\n  }\n\n  if (typeof value !== \"object\" && typeof value !== \"function\") {\n    throw new Error(\"Unsupported format: \".concat(typeof value, \". Expected an object or a function.\"));\n  }\n\n  if (filepath !== null && typeof value === \"object\" && value) {\n    throw new Error(\"Plugin/Preset files are not allowed to export objects, only functions. In \".concat(filepath));\n  }\n\n  return {\n    name: name,\n    alias: filepath || alias,\n    value: value,\n    options: options,\n    dirname: dirname,\n    ownPass: ownPass,\n    file: file\n  };\n}\n\nfunction assertNoDuplicates(items) {\n  var map = new Map();\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var item = _step.value;\n      if (typeof item.value !== \"function\") return \"continue\";\n      var nameMap = map.get(item.value);\n\n      if (!nameMap) {\n        nameMap = new Set();\n        map.set(item.value, nameMap);\n      }\n\n      if (nameMap.has(item.name)) {\n        var conflicts = items.filter(function (i) {\n          return i.value === item.value;\n        });\n        throw new Error([\"Duplicate plugin/preset detected.\", \"If you'd like to use two separate instances of a plugin,\", \"they need separate names, e.g.\", \"\", \"  plugins: [\", \"    ['some-plugin', {}],\", \"    ['some-plugin', {}, 'some unique name'],\", \"  ]\", \"\", \"Duplicates detected are:\", \"\".concat(JSON.stringify(conflicts, null, 2))].join(\"\\n\"));\n      }\n\n      nameMap.add(item.name);\n    };\n\n    for (var _iterator = items[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _ret = _loop();\n\n      if (_ret === \"continue\") continue;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}","map":{"version":3,"sources":["/home/hyper/Downloads/gronthik/bookstore/node_modules/@babel/core/lib/config/config-descriptors.js"],"names":["Object","defineProperty","exports","value","createCachedDescriptors","createUncachedDescriptors","createDescriptor","_files","require","_item","_caching","isEqualDescriptor","a","b","name","options","dirname","alias","ownPass","file","request","resolved","plugins","presets","passPerPreset","createCachedPluginDescriptors","createCachedPresetDescriptors","createPluginDescriptors","createPresetDescriptors","PRESET_DESCRIPTOR_CACHE","WeakMap","makeWeakCache","items","cache","using","dir","makeStrongCache","map","desc","loadCachedDescriptor","PLUGIN_DESCRIPTOR_CACHE","DEFAULT_OPTIONS","cacheByOptions","get","set","possibilities","indexOf","matches","filter","possibility","length","push","createDescriptors","type","descriptors","item","index","assertNoDuplicates","pair","getItemDescriptor","Array","isArray","undefined","filepath","Error","resolver","loadPlugin","loadPreset","String","__esModule","default","Map","nameMap","Set","has","conflicts","i","JSON","stringify","join","add"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createCachedDescriptors = createCachedDescriptors;\nexports.createUncachedDescriptors = createUncachedDescriptors;\nexports.createDescriptor = createDescriptor;\n\nvar _files = require(\"./files\");\n\nvar _item = require(\"./item\");\n\nvar _caching = require(\"./caching\");\n\nfunction isEqualDescriptor(a, b) {\n  return a.name === b.name && a.value === b.value && a.options === b.options && a.dirname === b.dirname && a.alias === b.alias && a.ownPass === b.ownPass && (a.file && a.file.request) === (b.file && b.file.request) && (a.file && a.file.resolved) === (b.file && b.file.resolved);\n}\n\nfunction createCachedDescriptors(dirname, options, alias) {\n  const {\n    plugins,\n    presets,\n    passPerPreset\n  } = options;\n  return {\n    options,\n    plugins: plugins ? () => createCachedPluginDescriptors(plugins, dirname)(alias) : () => [],\n    presets: presets ? () => createCachedPresetDescriptors(presets, dirname)(alias)(!!passPerPreset) : () => []\n  };\n}\n\nfunction createUncachedDescriptors(dirname, options, alias) {\n  let plugins;\n  let presets;\n  return {\n    options,\n    plugins: () => {\n      if (!plugins) {\n        plugins = createPluginDescriptors(options.plugins || [], dirname, alias);\n      }\n\n      return plugins;\n    },\n    presets: () => {\n      if (!presets) {\n        presets = createPresetDescriptors(options.presets || [], dirname, alias, !!options.passPerPreset);\n      }\n\n      return presets;\n    }\n  };\n}\n\nconst PRESET_DESCRIPTOR_CACHE = new WeakMap();\nconst createCachedPresetDescriptors = (0, _caching.makeWeakCache)((items, cache) => {\n  const dirname = cache.using(dir => dir);\n  return (0, _caching.makeStrongCache)(alias => (0, _caching.makeStrongCache)(passPerPreset => createPresetDescriptors(items, dirname, alias, passPerPreset).map(desc => loadCachedDescriptor(PRESET_DESCRIPTOR_CACHE, desc))));\n});\nconst PLUGIN_DESCRIPTOR_CACHE = new WeakMap();\nconst createCachedPluginDescriptors = (0, _caching.makeWeakCache)((items, cache) => {\n  const dirname = cache.using(dir => dir);\n  return (0, _caching.makeStrongCache)(alias => createPluginDescriptors(items, dirname, alias).map(desc => loadCachedDescriptor(PLUGIN_DESCRIPTOR_CACHE, desc)));\n});\nconst DEFAULT_OPTIONS = {};\n\nfunction loadCachedDescriptor(cache, desc) {\n  const {\n    value,\n    options = DEFAULT_OPTIONS\n  } = desc;\n  if (options === false) return desc;\n  let cacheByOptions = cache.get(value);\n\n  if (!cacheByOptions) {\n    cacheByOptions = new WeakMap();\n    cache.set(value, cacheByOptions);\n  }\n\n  let possibilities = cacheByOptions.get(options);\n\n  if (!possibilities) {\n    possibilities = [];\n    cacheByOptions.set(options, possibilities);\n  }\n\n  if (possibilities.indexOf(desc) === -1) {\n    const matches = possibilities.filter(possibility => isEqualDescriptor(possibility, desc));\n\n    if (matches.length > 0) {\n      return matches[0];\n    }\n\n    possibilities.push(desc);\n  }\n\n  return desc;\n}\n\nfunction createPresetDescriptors(items, dirname, alias, passPerPreset) {\n  return createDescriptors(\"preset\", items, dirname, alias, passPerPreset);\n}\n\nfunction createPluginDescriptors(items, dirname, alias) {\n  return createDescriptors(\"plugin\", items, dirname, alias);\n}\n\nfunction createDescriptors(type, items, dirname, alias, ownPass) {\n  const descriptors = items.map((item, index) => createDescriptor(item, dirname, {\n    type,\n    alias: `${alias}$${index}`,\n    ownPass: !!ownPass\n  }));\n  assertNoDuplicates(descriptors);\n  return descriptors;\n}\n\nfunction createDescriptor(pair, dirname, {\n  type,\n  alias,\n  ownPass\n}) {\n  const desc = (0, _item.getItemDescriptor)(pair);\n\n  if (desc) {\n    return desc;\n  }\n\n  let name;\n  let options;\n  let value = pair;\n\n  if (Array.isArray(value)) {\n    if (value.length === 3) {\n      [value, options, name] = value;\n    } else {\n      [value, options] = value;\n    }\n  }\n\n  let file = undefined;\n  let filepath = null;\n\n  if (typeof value === \"string\") {\n    if (typeof type !== \"string\") {\n      throw new Error(\"To resolve a string-based item, the type of item must be given\");\n    }\n\n    const resolver = type === \"plugin\" ? _files.loadPlugin : _files.loadPreset;\n    const request = value;\n    ({\n      filepath,\n      value\n    } = resolver(value, dirname));\n    file = {\n      request,\n      resolved: filepath\n    };\n  }\n\n  if (!value) {\n    throw new Error(`Unexpected falsy value: ${String(value)}`);\n  }\n\n  if (typeof value === \"object\" && value.__esModule) {\n    if (value.default) {\n      value = value.default;\n    } else {\n      throw new Error(\"Must export a default export when using ES6 modules.\");\n    }\n  }\n\n  if (typeof value !== \"object\" && typeof value !== \"function\") {\n    throw new Error(`Unsupported format: ${typeof value}. Expected an object or a function.`);\n  }\n\n  if (filepath !== null && typeof value === \"object\" && value) {\n    throw new Error(`Plugin/Preset files are not allowed to export objects, only functions. In ${filepath}`);\n  }\n\n  return {\n    name,\n    alias: filepath || alias,\n    value,\n    options,\n    dirname,\n    ownPass,\n    file\n  };\n}\n\nfunction assertNoDuplicates(items) {\n  const map = new Map();\n\n  for (const item of items) {\n    if (typeof item.value !== \"function\") continue;\n    let nameMap = map.get(item.value);\n\n    if (!nameMap) {\n      nameMap = new Set();\n      map.set(item.value, nameMap);\n    }\n\n    if (nameMap.has(item.name)) {\n      const conflicts = items.filter(i => i.value === item.value);\n      throw new Error([`Duplicate plugin/preset detected.`, `If you'd like to use two separate instances of a plugin,`, `they need separate names, e.g.`, ``, `  plugins: [`, `    ['some-plugin', {}],`, `    ['some-plugin', {}, 'some unique name'],`, `  ]`, ``, `Duplicates detected are:`, `${JSON.stringify(conflicts, null, 2)}`].join(\"\\n\"));\n    }\n\n    nameMap.add(item.name);\n  }\n}"]},"metadata":{},"sourceType":"script"}